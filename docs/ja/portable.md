# Zettlrをポータブルアプリケーションとして使用する

多くの人はZettlrを他のプログラムと同様に普通にインストールすると思いますが、ポータブルアプリケーションとして使いたい人もいるかもしれません。ここでは、その方法を解説します。

> 「ポータブルアプリケーション」というのはWindowsの文脈でのみ意味のある言葉です。このガイド自体はクロスプラットフォームで有効ですが、MacやLinuxでポータブルアプリケーションを使うのは一般的ではありません。

## ポータブルアプリケーションとは

ポータブルアプリケーションとは基本的にはWindowsのアプリケーションであり、実行されるコンピュータから完全に独立しているもののことです。ポータブル構成のアプリケーションをUSBメモリに入れて持ち運び、別のコンピュータに差して使用することがよく行われています。これは、システム管理者の使用するデバッグ用プログラムであったり、Zettlrのようなエディタアプリケーションだったりします。

アプリケーションの設定、データファイル、実行に必要なその他のファイルは、いくつかの決まったデフォルトディレクトリ（たいていはプログラムを実行している現在のユーザアカウントのディレクトリ内）に保存されています。しかしこれらはUSBメモリではなく常にコンピュータ内に存在します。このことがアプリケーションをポータブルにするための主要な障害となります。アプリケーションをポータブルにする鍵は、コンピュータ内からではなくUSBメモリから必要なデータを読み書きするように指定することです。

> ポータブルアプリケーションを使うべきか迷っている場合は、とりあえず普通にインストールすることをお勧めします。以下で説明するように、後からいつでもポータブル版に切り替えることができます。

## Zettlrをポータブルアプリケーションとして設定する方法

ポータブルアプリケーションは、いくつかの特徴によって通常のインストールと区別されます。以下の説明では、アプリケーションのデバッグ用のコマンドライン引数を利用していますが、それがポータブル版のインストールとして非常にうまく機能します。

まず、Windows用のインストーラをダウンロードして通常のインストールを行います。その際、デフォルトの場所ではなくUSBメモリ内、もしくはその他のフォルダ（ポータブルアプリケーションなので後でフォルダを移動できます）にインストールします。

インストールが完了したら、インストール時に指定したフォルダに必要なファイル（`Zettlr.exe`、`app.asar`、その他 ）がすべて入っているはずです。

Windows 10は相対パスのショートカットをサポートしていないので、普通にショートカットを作っても使えません。そこで次に起動するためのバッチファイルを作ります。拡張子が`.bat`のファイル、例えば`Zettlr.bat`を作り、次の内容を書き込みます：

```
Zettlr.exe --data-dir="./zettlr-config"
```

これで、バッチファイルを実行すればZettlrが起動し、`zettlr-config`にデータを保存するように指定されます。もちろん他のフォルダ名を設定してもかまいません。アプリケーションを起動する前に指定したフォルダを作っておいてください。

## 固定のインストールをポータブルアプリケーションに変更する

通常の固定インストールをポータブルアプリケーションに切り替えることもできます。そのためには、まずZettlrのアプリケーションディレクトリ**全体**をコピーします。すべて必要なファイルです。任意の場所にコピーしてください。

次に、アプリケーションデータディレクトリを開きます。 `C:\Users\<your-user-name>\AppData\Roaming\Zettlr`であるはずですが、[インストールの説明](install.md)に正しいパスが書いてあります。このディレクトリを、先ほどコピーしたアプリケーションディレクトリにコピーしてください。中身がわかるようにフォルダ名を変えると良いでしょう。

最後に、前述と同様のバッチファイルを作成します:

```
Zettlr.exe --data-dir="./zettlr-config"
```

`zettlr-config`は正しいパスに置き換えてください。
